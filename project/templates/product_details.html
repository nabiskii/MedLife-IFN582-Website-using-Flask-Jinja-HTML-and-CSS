{% extends 'base.html' %}

{% block main %}


<br><br><div class="container">
    <div class="card my-5">

        <div class="row main">
            <div class="col-lg-4 justify-content-center d-flex align-items-start">
                <img src="{{ url_for('static', filename='img/'+ item.imageURL) }}" class="img-fluid" alt="...">
            </div>
            <div class="col-lg-8">
                <h2>{{item.itemName}}</h2>
                <div class="mb-3">
                    {% if item.onhandQuantity > 0 %}
                    <span id="custom-span" class="brand-color-text" ;>Available</span>
                    {% else %}
                    <span id="custom-span" class="contrast-text">Out of stock</span>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {% if item.discountPrice %}
                    <span id="custom-span">Price: ${{item.discountPrice}}</span>
                    <span class="text-muted"><s>${{item.unitPrice}}</s></span>
                    {% else %}
                    <span id="custom-span">Price: ${{item.unitPrice}}</span>
                    {% endif %}
                </div>

                <p>{{item.itemLongDescription1}}</p>
                <p class="mb-4">
                    Instructions: {{item.itemLongDescription2}}
                </p>

                <form method="GET" class="mb-4">
                    <label>Quantity: </label>
                    <input type="number" id="quantity" name="quantity" min="1"
                        value="{{ request.args.get('quantity', 1) }}" onchange="this.form.submit()">
                </form>

                {% set quantity = request.args.get('quantity', 1) | int %}

                {% if item.onhandQuantity > 0 %}

                {% if quantity > 1 %}
                <a href="{{ url_for('main.order_with_quantity', item_id=item.itemCode, quantity=quantity ) }}"
                    class="btn btn-success mb-4"><i class="bi bi-bag-plus"></i>&nbsp;&nbsp;Add to Cart</a>
                {% else %}
                <a href="{{ url_for('main.order_add', item_id=item.itemCode ) }}" class="btn btn-success mb-4"><i
                        class="bi bi-bag-plus"></i>&nbsp;&nbsp;Add to Cart</a>
                {% endif %}

                {% else %}
                <a href="#" class="btn btn-secondary mb-4"><i class="bi bi-bag-plus"></i>&nbsp;&nbsp;Not Available</a>
                {% endif %}

                {% if session['user'] and session['user']['is_admin'] %}
                <a href="{{ url_for('main.edit_item', code=item.itemCode) }}" class="btn btn-jumbotron mb-4"
                    :custom-hover><i class="bi bi-pencil-square"></i>&nbsp;&nbsp;Edit Item</a>
                {% endif %}

            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-lg-12 mb-2">
            <a href="{{ url_for('main.index') }}#products"><i class="bi bi-arrow-left"></i>&nbsp;&nbsp;Back
                to
                shopping</a>
        </div>
    </div>

</div>

{% endblock %}