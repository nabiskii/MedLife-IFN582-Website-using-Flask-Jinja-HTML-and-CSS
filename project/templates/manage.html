{% extends 'base.html' %}

{% block main %}
<h2>Welcome, {{ user.userName }}!</h2>
<p>Your role: {{ user.userType }}</p>

{% if user.userType == 'Admin' %}
  <h3>Manage Users</h3>
  <a href="{{ url_for('main.add_user') }}" class="btn btn-success mb-2">Add User</a>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>User Type</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for account in accounts %}
      <tr>
        <td>{{ account.userID }}</td>
        <td>{{ account.userName }}</td>
        <td>{{ account.userType }}</td>
        <td>
          <a href="{{ url_for('main.edit_user', user_id=account.userID) }}" class="btn btn-primary btn-sm">Edit</a>
          <a href="{{ url_for('main.delete_user', user_id=account.userID) }}" class="btn btn-danger btn-sm" onclick="return confirm('Delete this user?');">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p><a href="{{ url_for('main.admin_products') }}">Manage Products</a></p>
  <p><a href="{{ url_for('main.admin_categories') }}">Manage Categories</a></p>
  <p><a href="{{ url_for('main.admin_orders') }}">Manage Orders</a></p>
{% endif %}

<p><a href="{{ url_for('main.logout') }}">Logout</a></p>
{% endblock %}
